// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0

package db

import (
	"context"
	"time"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

type Querier interface {
	CountActiveAuthTokensByUser(ctx context.Context, userID uuid.UUID) (int64, error)
	CountActiveUserSessions(ctx context.Context, userID uuid.UUID) (int64, error)
	CountUserAPIKeys(ctx context.Context, userID uuid.UUID) (int64, error)
	// Count users matching filters
	CountUsers(ctx context.Context, arg CountUsersParams) (int64, error)
	CreateAPIKey(ctx context.Context, arg CreateAPIKeyParams) (SharedApiKey, error)
	CreateAuthToken(ctx context.Context, arg CreateAuthTokenParams) (SharedAuthToken, error)
	// Upload a new avatar (sets it as current)
	CreateAvatar(ctx context.Context, arg CreateAvatarParams) (SharedUserAvatar, error)
	// Email Verification Tokens
	CreateEmailVerificationToken(ctx context.Context, arg CreateEmailVerificationTokenParams) (SharedEmailVerificationToken, error)
	// Password Reset Tokens
	CreatePasswordResetToken(ctx context.Context, arg CreatePasswordResetTokenParams) (SharedPasswordResetToken, error)
	// Create a new server setting
	CreateServerSetting(ctx context.Context, arg CreateServerSettingParams) (SharedServerSetting, error)
	// Session Management Queries
	// Persistent session tracking with device information
	CreateSession(ctx context.Context, arg CreateSessionParams) (SharedSession, error)
	// Create a new user
	CreateUser(ctx context.Context, arg CreateUserParams) (SharedUser, error)
	// Create a new user setting
	CreateUserSetting(ctx context.Context, arg CreateUserSettingParams) (SharedUserSetting, error)
	DeleteAPIKey(ctx context.Context, id uuid.UUID) error
	// Delete all settings for a user (used when user is deleted)
	DeleteAllUserSettings(ctx context.Context, userID uuid.UUID) error
	// Soft delete an avatar
	DeleteAvatar(ctx context.Context, id uuid.UUID) error
	DeleteExpiredAPIKeys(ctx context.Context) error
	DeleteExpiredAuthTokens(ctx context.Context) error
	DeleteExpiredEmailVerificationTokens(ctx context.Context) error
	DeleteExpiredPasswordResetTokens(ctx context.Context) error
	DeleteExpiredSessions(ctx context.Context) error
	DeleteRevokedAuthTokens(ctx context.Context) error
	DeleteRevokedSessions(ctx context.Context) error
	// Delete a server setting
	DeleteServerSetting(ctx context.Context, key string) error
	DeleteUsedPasswordResetTokens(ctx context.Context) error
	// Soft delete a user
	DeleteUser(ctx context.Context, id uuid.UUID) error
	// Delete user preferences (cleanup on user deletion)
	DeleteUserPreferences(ctx context.Context, userID uuid.UUID) error
	// Delete a user setting
	DeleteUserSetting(ctx context.Context, arg DeleteUserSettingParams) error
	DeleteVerifiedEmailTokens(ctx context.Context) error
	GetAPIKey(ctx context.Context, id uuid.UUID) (SharedApiKey, error)
	GetAPIKeyByHash(ctx context.Context, keyHash string) (SharedApiKey, error)
	GetAPIKeyByPrefix(ctx context.Context, keyPrefix string) (SharedApiKey, error)
	// This is a placeholder - actual usage tracking would be in a separate table
	// For now, we just return last_used_at
	GetAPIKeyUsageCount(ctx context.Context, id uuid.UUID) (pgtype.Timestamptz, error)
	GetAuthTokenByHash(ctx context.Context, tokenHash string) (SharedAuthToken, error)
	GetAuthTokensByDeviceFingerprint(ctx context.Context, arg GetAuthTokensByDeviceFingerprintParams) ([]SharedAuthToken, error)
	GetAuthTokensByUserID(ctx context.Context, userID uuid.UUID) ([]SharedAuthToken, error)
	// Get a specific avatar by ID
	GetAvatarByID(ctx context.Context, id uuid.UUID) (SharedUserAvatar, error)
	// ============================================================================
	// User Avatars Queries
	// ============================================================================
	// Get the current avatar for a user
	GetCurrentAvatar(ctx context.Context, userID uuid.UUID) (SharedUserAvatar, error)
	GetEmailVerificationToken(ctx context.Context, tokenHash string) (SharedEmailVerificationToken, error)
	// Sessions that haven't been active for N hours
	GetInactiveSessions(ctx context.Context, inactiveSince time.Time) ([]SharedSession, error)
	// Get the latest avatar version number for a user
	GetLatestAvatarVersion(ctx context.Context, userID uuid.UUID) (int32, error)
	GetPasswordResetToken(ctx context.Context, tokenHash string) (SharedPasswordResetToken, error)
	// Get a server setting by key
	GetServerSetting(ctx context.Context, key string) (SharedServerSetting, error)
	GetSessionByID(ctx context.Context, id uuid.UUID) (SharedSession, error)
	GetSessionByRefreshTokenHash(ctx context.Context, refreshTokenHash *string) (SharedSession, error)
	GetSessionByTokenHash(ctx context.Context, tokenHash string) (SharedSession, error)
	// Get a user by email
	GetUserByEmail(ctx context.Context, email string) (SharedUser, error)
	// Get a user by their UUID
	GetUserByID(ctx context.Context, id uuid.UUID) (SharedUser, error)
	// Get a user by username
	GetUserByUsername(ctx context.Context, username string) (SharedUser, error)
	// ============================================================================
	// User Preferences Queries
	// ============================================================================
	// Get user preferences
	GetUserPreferences(ctx context.Context, userID uuid.UUID) (SharedUserPreference, error)
	// ============================================================================
	// User Settings Queries
	// ============================================================================
	// Get a user setting by user_id and key
	GetUserSetting(ctx context.Context, arg GetUserSettingParams) (SharedUserSetting, error)
	// Permanently delete an avatar file
	HardDeleteAvatar(ctx context.Context, id uuid.UUID) error
	// Permanently delete a user (GDPR compliance)
	HardDeleteUser(ctx context.Context, id uuid.UUID) error
	InvalidateEmailVerificationTokensByEmail(ctx context.Context, email string) error
	InvalidateUserEmailVerificationTokens(ctx context.Context, userID uuid.UUID) error
	InvalidateUserPasswordResetTokens(ctx context.Context, userID uuid.UUID) error
	ListActiveUserAPIKeys(ctx context.Context, userID uuid.UUID) ([]SharedApiKey, error)
	// Includes expired but not revoked sessions (for user to see full history)
	ListAllUserSessions(ctx context.Context, userID uuid.UUID) ([]SharedSession, error)
	// Get public settings (exposed in API)
	ListPublicServerSettings(ctx context.Context) ([]SharedServerSetting, error)
	// Get all server settings
	ListServerSettings(ctx context.Context) ([]SharedServerSetting, error)
	// Get settings by category
	ListServerSettingsByCategory(ctx context.Context, category *string) ([]SharedServerSetting, error)
	ListUserAPIKeys(ctx context.Context, userID uuid.UUID) ([]SharedApiKey, error)
	// List all avatars for a user (for history)
	ListUserAvatars(ctx context.Context, arg ListUserAvatarsParams) ([]SharedUserAvatar, error)
	ListUserSessions(ctx context.Context, userID uuid.UUID) ([]SharedSession, error)
	// Get all settings for a user
	ListUserSettings(ctx context.Context, userID uuid.UUID) ([]SharedUserSetting, error)
	// Get user settings by category
	ListUserSettingsByCategory(ctx context.Context, arg ListUserSettingsByCategoryParams) ([]SharedUserSetting, error)
	// List all active users with optional filters
	ListUsers(ctx context.Context, arg ListUsersParams) ([]SharedUser, error)
	MarkEmailVerificationTokenUsed(ctx context.Context, id uuid.UUID) error
	MarkPasswordResetTokenUsed(ctx context.Context, id uuid.UUID) error
	RevokeAPIKey(ctx context.Context, id uuid.UUID) error
	RevokeAllUserAuthTokens(ctx context.Context, userID uuid.UUID) error
	RevokeAllUserAuthTokensExcept(ctx context.Context, arg RevokeAllUserAuthTokensExceptParams) error
	RevokeAllUserSessions(ctx context.Context, arg RevokeAllUserSessionsParams) error
	RevokeAllUserSessionsExcept(ctx context.Context, arg RevokeAllUserSessionsExceptParams) error
	RevokeAuthToken(ctx context.Context, id uuid.UUID) error
	RevokeAuthTokenByHash(ctx context.Context, tokenHash string) error
	RevokeInactiveSessions(ctx context.Context, inactiveSince time.Time) error
	RevokeSession(ctx context.Context, arg RevokeSessionParams) error
	RevokeSessionByTokenHash(ctx context.Context, arg RevokeSessionByTokenHashParams) error
	// Set an existing avatar as current
	SetCurrentAvatar(ctx context.Context, id uuid.UUID) error
	// Mark all user's avatars as not current (before setting a new current)
	UnsetCurrentAvatars(ctx context.Context, userID uuid.UUID) error
	UpdateAPIKeyLastUsed(ctx context.Context, id uuid.UUID) error
	UpdateAPIKeyScopes(ctx context.Context, arg UpdateAPIKeyScopesParams) error
	UpdateAuthTokenLastUsed(ctx context.Context, id uuid.UUID) error
	// Update user last login timestamp
	UpdateLastLogin(ctx context.Context, id uuid.UUID) error
	// Update user password hash
	UpdatePassword(ctx context.Context, arg UpdatePasswordParams) error
	// Update a server setting value
	UpdateServerSetting(ctx context.Context, arg UpdateServerSettingParams) (SharedServerSetting, error)
	UpdateSessionActivity(ctx context.Context, id uuid.UUID) error
	UpdateSessionActivityByTokenHash(ctx context.Context, tokenHash string) error
	// Update user fields
	UpdateUser(ctx context.Context, arg UpdateUserParams) (SharedUser, error)
	// Update a user setting value
	UpdateUserSetting(ctx context.Context, arg UpdateUserSettingParams) (SharedUserSetting, error)
	// Insert or update a server setting
	UpsertServerSetting(ctx context.Context, arg UpsertServerSettingParams) (SharedServerSetting, error)
	// Create or update user preferences
	UpsertUserPreferences(ctx context.Context, arg UpsertUserPreferencesParams) (SharedUserPreference, error)
	// Insert or update a user setting
	UpsertUserSetting(ctx context.Context, arg UpsertUserSettingParams) (SharedUserSetting, error)
	// Mark email as verified
	VerifyEmail(ctx context.Context, id uuid.UUID) error
}

var _ Querier = (*Queries)(nil)
