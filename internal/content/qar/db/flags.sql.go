// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: flags.sql

package adultdb

import (
	"context"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

const addExpeditionFlag = `-- name: AddExpeditionFlag :exec
INSERT INTO qar.expedition_flags (expedition_id, flag_id)
VALUES ($1, $2)
ON CONFLICT (expedition_id, flag_id) DO NOTHING
`

type AddExpeditionFlagParams struct {
	ExpeditionID uuid.UUID `json:"expeditionId"`
	FlagID       uuid.UUID `json:"flagId"`
}

func (q *Queries) AddExpeditionFlag(ctx context.Context, arg AddExpeditionFlagParams) error {
	_, err := q.db.Exec(ctx, addExpeditionFlag, arg.ExpeditionID, arg.FlagID)
	return err
}

const addVoyageFlag = `-- name: AddVoyageFlag :exec
INSERT INTO qar.voyage_flags (voyage_id, flag_id)
VALUES ($1, $2)
ON CONFLICT (voyage_id, flag_id) DO NOTHING
`

type AddVoyageFlagParams struct {
	VoyageID uuid.UUID `json:"voyageId"`
	FlagID   uuid.UUID `json:"flagId"`
}

func (q *Queries) AddVoyageFlag(ctx context.Context, arg AddVoyageFlagParams) error {
	_, err := q.db.Exec(ctx, addVoyageFlag, arg.VoyageID, arg.FlagID)
	return err
}

const clearExpeditionFlags = `-- name: ClearExpeditionFlags :exec
DELETE FROM qar.expedition_flags WHERE expedition_id = $1
`

func (q *Queries) ClearExpeditionFlags(ctx context.Context, expeditionID uuid.UUID) error {
	_, err := q.db.Exec(ctx, clearExpeditionFlags, expeditionID)
	return err
}

const clearVoyageFlags = `-- name: ClearVoyageFlags :exec
DELETE FROM qar.voyage_flags WHERE voyage_id = $1
`

func (q *Queries) ClearVoyageFlags(ctx context.Context, voyageID uuid.UUID) error {
	_, err := q.db.Exec(ctx, clearVoyageFlags, voyageID)
	return err
}

const createFlag = `-- name: CreateFlag :one
INSERT INTO qar.flags (name, description, parent_id, stashdb_id, waters)
VALUES ($1, $2, $3, $4, $5)
RETURNING id, name, description, parent_id, stashdb_id, created_at, waters
`

type CreateFlagParams struct {
	Name        string      `json:"name"`
	Description *string     `json:"description"`
	ParentID    pgtype.UUID `json:"parentId"`
	StashdbID   *string     `json:"stashdbId"`
	Waters      *string     `json:"waters"`
}

func (q *Queries) CreateFlag(ctx context.Context, arg CreateFlagParams) (QarFlag, error) {
	row := q.db.QueryRow(ctx, createFlag,
		arg.Name,
		arg.Description,
		arg.ParentID,
		arg.StashdbID,
		arg.Waters,
	)
	var i QarFlag
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.ParentID,
		&i.StashdbID,
		&i.CreatedAt,
		&i.Waters,
	)
	return i, err
}

const deleteFlag = `-- name: DeleteFlag :exec
DELETE FROM qar.flags WHERE id = $1
`

func (q *Queries) DeleteFlag(ctx context.Context, id uuid.UUID) error {
	_, err := q.db.Exec(ctx, deleteFlag, id)
	return err
}

const getFlagByID = `-- name: GetFlagByID :one

SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags WHERE id = $1
`

// Flags (Tags) - QAR obfuscated queries
func (q *Queries) GetFlagByID(ctx context.Context, id uuid.UUID) (QarFlag, error) {
	row := q.db.QueryRow(ctx, getFlagByID, id)
	var i QarFlag
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.ParentID,
		&i.StashdbID,
		&i.CreatedAt,
		&i.Waters,
	)
	return i, err
}

const getFlagByName = `-- name: GetFlagByName :one
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags WHERE name = $1
`

func (q *Queries) GetFlagByName(ctx context.Context, name string) (QarFlag, error) {
	row := q.db.QueryRow(ctx, getFlagByName, name)
	var i QarFlag
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.ParentID,
		&i.StashdbID,
		&i.CreatedAt,
		&i.Waters,
	)
	return i, err
}

const getFlagByStashDBID = `-- name: GetFlagByStashDBID :one
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags WHERE stashdb_id = $1
`

func (q *Queries) GetFlagByStashDBID(ctx context.Context, stashdbID *string) (QarFlag, error) {
	row := q.db.QueryRow(ctx, getFlagByStashDBID, stashdbID)
	var i QarFlag
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.ParentID,
		&i.StashdbID,
		&i.CreatedAt,
		&i.Waters,
	)
	return i, err
}

const listExpeditionFlags = `-- name: ListExpeditionFlags :many
SELECT f.id, f.name, f.description, f.parent_id, f.stashdb_id, f.created_at, f.waters FROM qar.flags f
JOIN qar.expedition_flags ef ON ef.flag_id = f.id
WHERE ef.expedition_id = $1
ORDER BY f.name
`

func (q *Queries) ListExpeditionFlags(ctx context.Context, expeditionID uuid.UUID) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listExpeditionFlags, expeditionID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listFlagChildren = `-- name: ListFlagChildren :many
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags
WHERE parent_id = $1
ORDER BY name
`

func (q *Queries) ListFlagChildren(ctx context.Context, parentID pgtype.UUID) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listFlagChildren, parentID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listFlags = `-- name: ListFlags :many
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags
ORDER BY name
LIMIT $1 OFFSET $2
`

type ListFlagsParams struct {
	Limit  int32 `json:"limit"`
	Offset int32 `json:"offset"`
}

func (q *Queries) ListFlags(ctx context.Context, arg ListFlagsParams) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listFlags, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listFlagsByWaters = `-- name: ListFlagsByWaters :many
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags
WHERE waters = $1
ORDER BY name
`

func (q *Queries) ListFlagsByWaters(ctx context.Context, waters *string) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listFlagsByWaters, waters)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listRootFlags = `-- name: ListRootFlags :many
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags
WHERE parent_id IS NULL
ORDER BY name
LIMIT $1 OFFSET $2
`

type ListRootFlagsParams struct {
	Limit  int32 `json:"limit"`
	Offset int32 `json:"offset"`
}

func (q *Queries) ListRootFlags(ctx context.Context, arg ListRootFlagsParams) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listRootFlags, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listVoyageFlags = `-- name: ListVoyageFlags :many
SELECT f.id, f.name, f.description, f.parent_id, f.stashdb_id, f.created_at, f.waters FROM qar.flags f
JOIN qar.voyage_flags vf ON vf.flag_id = f.id
WHERE vf.voyage_id = $1
ORDER BY f.name
`

func (q *Queries) ListVoyageFlags(ctx context.Context, voyageID uuid.UUID) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, listVoyageFlags, voyageID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const removeExpeditionFlag = `-- name: RemoveExpeditionFlag :exec
DELETE FROM qar.expedition_flags WHERE expedition_id = $1 AND flag_id = $2
`

type RemoveExpeditionFlagParams struct {
	ExpeditionID uuid.UUID `json:"expeditionId"`
	FlagID       uuid.UUID `json:"flagId"`
}

func (q *Queries) RemoveExpeditionFlag(ctx context.Context, arg RemoveExpeditionFlagParams) error {
	_, err := q.db.Exec(ctx, removeExpeditionFlag, arg.ExpeditionID, arg.FlagID)
	return err
}

const removeVoyageFlag = `-- name: RemoveVoyageFlag :exec
DELETE FROM qar.voyage_flags WHERE voyage_id = $1 AND flag_id = $2
`

type RemoveVoyageFlagParams struct {
	VoyageID uuid.UUID `json:"voyageId"`
	FlagID   uuid.UUID `json:"flagId"`
}

func (q *Queries) RemoveVoyageFlag(ctx context.Context, arg RemoveVoyageFlagParams) error {
	_, err := q.db.Exec(ctx, removeVoyageFlag, arg.VoyageID, arg.FlagID)
	return err
}

const searchFlags = `-- name: SearchFlags :many
SELECT id, name, description, parent_id, stashdb_id, created_at, waters FROM qar.flags
WHERE name ILIKE '%' || $1 || '%'
ORDER BY name
LIMIT $2 OFFSET $3
`

type SearchFlagsParams struct {
	Column1 *string `json:"column1"`
	Limit   int32   `json:"limit"`
	Offset  int32   `json:"offset"`
}

func (q *Queries) SearchFlags(ctx context.Context, arg SearchFlagsParams) ([]QarFlag, error) {
	rows, err := q.db.Query(ctx, searchFlags, arg.Column1, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []QarFlag{}
	for rows.Next() {
		var i QarFlag
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.ParentID,
			&i.StashdbID,
			&i.CreatedAt,
			&i.Waters,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateFlag = `-- name: UpdateFlag :one
UPDATE qar.flags
SET
    name = $2,
    description = $3,
    parent_id = $4,
    stashdb_id = $5,
    waters = $6
WHERE id = $1
RETURNING id, name, description, parent_id, stashdb_id, created_at, waters
`

type UpdateFlagParams struct {
	ID          uuid.UUID   `json:"id"`
	Name        string      `json:"name"`
	Description *string     `json:"description"`
	ParentID    pgtype.UUID `json:"parentId"`
	StashdbID   *string     `json:"stashdbId"`
	Waters      *string     `json:"waters"`
}

func (q *Queries) UpdateFlag(ctx context.Context, arg UpdateFlagParams) (QarFlag, error) {
	row := q.db.QueryRow(ctx, updateFlag,
		arg.ID,
		arg.Name,
		arg.Description,
		arg.ParentID,
		arg.StashdbID,
		arg.Waters,
	)
	var i QarFlag
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.ParentID,
		&i.StashdbID,
		&i.CreatedAt,
		&i.Waters,
	)
	return i, err
}
