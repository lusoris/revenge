// Code generated by ogen, DO NOT EDIT.

package ogen

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AddPolicy implements addPolicy operation.
	//
	// Add a new authorization policy (admin only).
	//
	// POST /api/v1/rbac/policies
	AddPolicy(ctx context.Context, req *PolicyRequest) (AddPolicyRes, error)
	// AssignRole implements assignRole operation.
	//
	// Assign a role to a user (admin only).
	//
	// POST /api/v1/rbac/users/{userId}/roles
	AssignRole(ctx context.Context, req *AssignRoleRequest, params AssignRoleParams) (AssignRoleRes, error)
	// ChangePassword implements changePassword operation.
	//
	// Change password for authenticated user (requires old password).
	//
	// POST /api/v1/auth/change-password
	ChangePassword(ctx context.Context, req *ChangePasswordRequest) (ChangePasswordRes, error)
	// DeleteUserSetting implements deleteUserSetting operation.
	//
	// Delete a user setting (revert to default).
	//
	// DELETE /api/v1/settings/user/{key}
	DeleteUserSetting(ctx context.Context, params DeleteUserSettingParams) (DeleteUserSettingRes, error)
	// ForgotPassword implements forgotPassword operation.
	//
	// Send password reset token to user's email address.
	//
	// POST /api/v1/auth/forgot-password
	ForgotPassword(ctx context.Context, req *ForgotPasswordRequest) (ForgotPasswordRes, error)
	// GetCurrentSession implements getCurrentSession operation.
	//
	// Get information about the current session.
	//
	// GET /api/v1/sessions/current
	GetCurrentSession(ctx context.Context) (GetCurrentSessionRes, error)
	// GetCurrentUser implements getCurrentUser operation.
	//
	// Get the currently authenticated user's profile.
	//
	// GET /api/v1/users/me
	GetCurrentUser(ctx context.Context) (GetCurrentUserRes, error)
	// GetLiveness implements getLiveness operation.
	//
	// Checks if the service is alive and running.
	// This should always return 200 unless the process is deadlocked.
	// Used by Kubernetes liveness probes.
	//
	// GET /health/live
	GetLiveness(ctx context.Context) (*HealthCheck, error)
	// GetReadiness implements getReadiness operation.
	//
	// Checks if the service is ready to accept traffic.
	// Returns 200 only if all dependencies (database, cache, etc.) are available.
	// Used by Kubernetes readiness probes.
	//
	// GET /health/ready
	GetReadiness(ctx context.Context) (GetReadinessRes, error)
	// GetServerSetting implements getServerSetting operation.
	//
	// Retrieve a specific server setting by key.
	//
	// GET /api/v1/settings/server/{key}
	GetServerSetting(ctx context.Context, params GetServerSettingParams) (GetServerSettingRes, error)
	// GetStartup implements getStartup operation.
	//
	// Checks if the service has completed initialization.
	// Returns 200 only after startup is complete.
	// Used by Kubernetes startup probes.
	//
	// GET /health/startup
	GetStartup(ctx context.Context) (GetStartupRes, error)
	// GetUserById implements getUserById operation.
	//
	// Get a user's public profile information.
	//
	// GET /api/v1/users/{userId}
	GetUserById(ctx context.Context, params GetUserByIdParams) (GetUserByIdRes, error)
	// GetUserPreferences implements getUserPreferences operation.
	//
	// Get notification and display preferences for the authenticated user.
	//
	// GET /api/v1/users/me/preferences
	GetUserPreferences(ctx context.Context) (GetUserPreferencesRes, error)
	// GetUserRoles implements getUserRoles operation.
	//
	// Get all roles assigned to a user.
	//
	// GET /api/v1/rbac/users/{userId}/roles
	GetUserRoles(ctx context.Context, params GetUserRolesParams) (GetUserRolesRes, error)
	// GetUserSetting implements getUserSetting operation.
	//
	// Retrieve a specific user setting by key.
	//
	// GET /api/v1/settings/user/{key}
	GetUserSetting(ctx context.Context, params GetUserSettingParams) (GetUserSettingRes, error)
	// ListPolicies implements listPolicies operation.
	//
	// Get all authorization policies (admin only).
	//
	// GET /api/v1/rbac/policies
	ListPolicies(ctx context.Context) (ListPoliciesRes, error)
	// ListServerSettings implements listServerSettings operation.
	//
	// Retrieve all server-wide configuration settings.
	//
	// GET /api/v1/settings/server
	ListServerSettings(ctx context.Context) (ListServerSettingsRes, error)
	// ListSessions implements listSessions operation.
	//
	// Get all active sessions for the authenticated user.
	//
	// GET /api/v1/sessions
	ListSessions(ctx context.Context) (ListSessionsRes, error)
	// ListUserSettings implements listUserSettings operation.
	//
	// Retrieve all settings for the authenticated user.
	//
	// GET /api/v1/settings/user
	ListUserSettings(ctx context.Context) (ListUserSettingsRes, error)
	// Login implements login operation.
	//
	// Authenticate user and return access token and refresh token.
	//
	// POST /api/v1/auth/login
	Login(ctx context.Context, req *LoginRequest) (LoginRes, error)
	// Logout implements logout operation.
	//
	// Invalidate the current refresh token.
	//
	// POST /api/v1/auth/logout
	Logout(ctx context.Context, req *LogoutRequest) (LogoutRes, error)
	// LogoutAll implements logoutAll operation.
	//
	// Revoke all sessions for the authenticated user (logout everywhere).
	//
	// DELETE /api/v1/sessions
	LogoutAll(ctx context.Context) (LogoutAllRes, error)
	// LogoutCurrent implements logoutCurrent operation.
	//
	// Revoke the current session (logout).
	//
	// DELETE /api/v1/sessions/current
	LogoutCurrent(ctx context.Context) (LogoutCurrentRes, error)
	// RefreshSession implements refreshSession operation.
	//
	// Refresh access token using refresh token.
	//
	// POST /api/v1/sessions/refresh
	RefreshSession(ctx context.Context, req *RefreshSessionRequest) (RefreshSessionRes, error)
	// RefreshToken implements refreshToken operation.
	//
	// Exchange refresh token for a new access token.
	//
	// POST /api/v1/auth/refresh
	RefreshToken(ctx context.Context, req *RefreshRequest) (RefreshTokenRes, error)
	// Register implements register operation.
	//
	// Create a new user account with username, email, and password.
	//
	// POST /api/v1/auth/register
	Register(ctx context.Context, req *RegisterRequest) (RegisterRes, error)
	// RemovePolicy implements removePolicy operation.
	//
	// Remove an authorization policy (admin only).
	//
	// DELETE /api/v1/rbac/policies
	RemovePolicy(ctx context.Context, req *PolicyRequest) (RemovePolicyRes, error)
	// RemoveRole implements removeRole operation.
	//
	// Remove a role from a user (admin only).
	//
	// DELETE /api/v1/rbac/users/{userId}/roles/{role}
	RemoveRole(ctx context.Context, params RemoveRoleParams) (RemoveRoleRes, error)
	// ResendVerification implements resendVerification operation.
	//
	// Resend email verification token to user's email address.
	//
	// POST /api/v1/auth/resend-verification
	ResendVerification(ctx context.Context) (ResendVerificationRes, error)
	// ResetPassword implements resetPassword operation.
	//
	// Reset password using token from password reset email.
	//
	// POST /api/v1/auth/reset-password
	ResetPassword(ctx context.Context, req *ResetPasswordRequest) (ResetPasswordRes, error)
	// RevokeSession implements revokeSession operation.
	//
	// Revoke a specific session by ID.
	//
	// DELETE /api/v1/sessions/{sessionId}
	RevokeSession(ctx context.Context, params RevokeSessionParams) (RevokeSessionRes, error)
	// UpdateCurrentUser implements updateCurrentUser operation.
	//
	// Update the authenticated user's profile.
	//
	// PUT /api/v1/users/me
	UpdateCurrentUser(ctx context.Context, req *UserUpdate) (UpdateCurrentUserRes, error)
	// UpdateServerSetting implements updateServerSetting operation.
	//
	// Update the value of a server setting.
	//
	// PUT /api/v1/settings/server/{key}
	UpdateServerSetting(ctx context.Context, req *SettingValue, params UpdateServerSettingParams) (UpdateServerSettingRes, error)
	// UpdateUserPreferences implements updateUserPreferences operation.
	//
	// Update notification and display preferences.
	//
	// PUT /api/v1/users/me/preferences
	UpdateUserPreferences(ctx context.Context, req *UserPreferencesUpdate) (UpdateUserPreferencesRes, error)
	// UpdateUserSetting implements updateUserSetting operation.
	//
	// Update the value of a user setting.
	//
	// PUT /api/v1/settings/user/{key}
	UpdateUserSetting(ctx context.Context, req *SettingValue, params UpdateUserSettingParams) (UpdateUserSettingRes, error)
	// UploadAvatar implements uploadAvatar operation.
	//
	// Upload a new avatar image.
	//
	// POST /api/v1/users/me/avatar
	UploadAvatar(ctx context.Context, req *UploadAvatarReq) (UploadAvatarRes, error)
	// VerifyEmail implements verifyEmail operation.
	//
	// Verify user email address with token from verification email.
	//
	// POST /api/v1/auth/verify-email
	VerifyEmail(ctx context.Context, req *VerifyEmailRequest) (VerifyEmailRes, error)
	// NewError creates *ErrorStatusCode from error returned by handler.
	//
	// Used for common default response.
	NewError(ctx context.Context, err error) *ErrorStatusCode
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
