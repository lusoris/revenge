# Claude Code Skills Specification - Documentation Automation

**Created**: 2026-01-31
**Purpose**: Detailed specifications for Claude Code skills to manage the documentation automation system
**Location**: `.claude/skills/` (to be implemented)

---

## Overview

Create **6 core skills** for managing the documentation automation system:

1. **scaffold-doc** - Create new design doc from template interactively
2. **generate-docs** - Regenerate docs from SOT/templates
3. **validate-doc** - Run full validation pipeline on doc(s)
4. **migrate-doc** - Convert existing doc to template format
5. **sync-configs** - Sync all config files from SOT
6. **check-automation** - Check automation system health

Each skill provides:
- Interactive prompts for inputs
- Validation before execution
- Clear success/failure feedback
- Rollback on failure
- Helpful error messages

---

## Skill 1: scaffold-doc

### Purpose
Create a new design document from templates interactively. Asks user for required information, generates YAML data file, renders markdown from template, validates output.

### Usage
```bash
# Interactive mode
/scaffold-doc

# With parameters
/scaffold-doc --type feature --name "Podcast Module" --category features/podcasts
```

### Interactive Flow
1. **Ask doc type**: Feature / Service / Integration
2. **Ask doc name**: e.g., "Podcast Module"
3. **Ask category**: e.g., "features/podcasts"
4. **Ask status**: Design / Sources / Instructions / Code / Linting / Unit Testing / Integration Testing
5. **Ask technical details**:
   - Code location (e.g., `internal/content/podcast/`)
   - Architecture pattern (e.g., "Repository pattern")
   - Primary dependencies (from SOT, multiselect)
6. **Generate data file**: `data/{category}/{DOC_NAME}.yaml`
7. **Render template**: `docs/dev/design/{category}/{DOC_NAME}.md`
8. **Validate output**: YAML schema, markdown lint
9. **Show summary**: File paths, next steps

### Parameters
- `--type` (`-t`): Doc type (feature, service, integration)
- `--name` (`-n`): Document name
- `--category` (`-c`): Category path (e.g., features/podcasts)
- `--interactive` (`-i`): Force interactive mode (default: true if params missing)

### Output
```
‚úÖ Created data file: data/features/podcasts/PODCASTS.yaml
‚úÖ Created design doc: docs/dev/design/features/podcasts/PODCASTS.md
‚úÖ Validation passed

Next steps:
1. Review generated doc: docs/dev/design/features/podcasts/PODCASTS.md
2. Edit data file to add details: data/features/podcasts/PODCASTS.yaml
3. Regenerate doc: /generate-docs --doc PODCASTS
4. Commit changes when ready
```

### Data File Template
For feature docs, generate:
```yaml
# Auto-generated by scaffold-doc
# Last updated: 2026-01-31

feature_name: "Podcast Module"
category: "features/podcasts"
category_path: "features/podcasts"

# Sources (from SOT - multiselect during scaffold)
sources:
  - fx
  - pgx
  - sqlc

# Design references (suggested based on category)
design_refs:
  - 01_ARCHITECTURE
  - 02_DESIGN_PRINCIPLES

# Status (7 dimensions)
status_design: "üü°"
status_design_notes: "Scaffold - needs detailed spec"
status_sources: "üî¥"
status_sources_notes: "Sources not yet documented"
status_instructions: "üî¥"
status_instructions_notes: "Implementation checklist needed"
status_code: "üî¥"
status_code_notes: "Not started"
status_linting: "üî¥"
status_linting_notes: "N/A - no code yet"
status_unit_testing: "üî¥"
status_unit_testing_notes: "N/A - no code yet"
status_integration_testing: "üî¥"
status_integration_testing_notes: "N/A - no code yet"

# Code location
code_location: "internal/content/podcast/"
last_updated: "2026-01-31"

# Overview
claude_overview: "TODO: Add technical overview of podcast module"
technical_purpose: "TODO: Add technical purpose"
architecture_pattern: "Repository pattern"

# Architecture (placeholders)
architecture_diagram: |
  TODO: Add ASCII architecture diagram

# Database (placeholders)
database_tables: []

# API (placeholders)
api_namespace: "/api/v1/podcasts"
api_endpoints: []

# Implementation (placeholder phases)
implementation_phases:
  - phase: 1
    name: "Core Infrastructure"
    tasks:
      - "Create package structure"
      - "Define entity structs"
      - "Create repository interface"
  - phase: 2
    name: "Database"
    tasks:
      - "Create migration"
      - "Create tables"
  - phase: 3
    name: "Service Layer"
    tasks:
      - "Implement service"
      - "Add caching"

# Related docs
related_docs:
  - name: "00_SOURCE_OF_TRUTH.md"
    path: "../../00_SOURCE_OF_TRUTH.md"
```

### Validation
- YAML schema validation (schemas/feature.schema.json)
- Required fields present
- Category path valid
- Code location follows project structure conventions
- Generated markdown is valid

### Error Handling
- If category directory doesn't exist: Create it
- If doc already exists: Ask to overwrite or exit
- If validation fails: Show errors, don't save files
- If template rendering fails: Show Jinja2 error with line number

---

## Skill 2: generate-docs

### Purpose
Regenerate design documentation from SOURCE_OF_TRUTH.md and data files. Can regenerate single doc, category, or all docs.

### Usage
```bash
# Regenerate single doc
/generate-docs --doc MOVIE_MODULE

# Regenerate category
/generate-docs --category features/video

# Regenerate all docs
/generate-docs --all

# Dry run (preview changes)
/generate-docs --all --dry-run
```

### Flow
1. **Parse inputs**: Determine scope (doc / category / all)
2. **Load shared data**: Parse SOT ‚Üí shared-sot.yaml
3. **Load category shared data**: shared-features.yaml, etc.
4. **Load doc-specific data**: data/{category}/{DOC_NAME}.yaml
5. **Merge data**: Shared SOT + Shared category + Doc-specific
6. **Render template**: Jinja2 rendering
7. **Post-process**:
   - Insert TOC (markdown-toc)
   - Format (prettier/ruff)
8. **Validate**:
   - YAML schema
   - Markdown lint
   - Link checking (optional, slow)
   - SOT reference checking
9. **Atomic write**:
   - Render to temp directory
   - Validate all outputs
   - If all pass: swap temp ‚Üí docs/
   - If any fail: rollback, show errors
10. **Show summary**: Files changed, validation results

### Parameters
- `--doc` (`-d`): Single doc name (e.g., MOVIE_MODULE)
- `--category` (`-c`): Category path (e.g., features/video)
- `--all` (`-a`): Regenerate all docs
- `--dry-run`: Preview changes without writing files
- `--skip-validation`: Skip validation (faster, unsafe)
- `--skip-toc`: Skip TOC generation
- `--skip-links`: Skip link checking (faster)

### Output
```
üîÑ Regenerating docs...

Scope: All (136 docs)

Phase 1: Loading shared data
‚úÖ Parsed SOURCE_OF_TRUTH.md (157 dependencies, 12 tools)
‚úÖ Loaded shared-features.yaml
‚úÖ Loaded shared-services.yaml
‚úÖ Loaded shared-integrations.yaml

Phase 2: Rendering (136 docs)
‚úÖ features/video/MOVIE_MODULE.md
‚úÖ features/video/TVSHOW_MODULE.md
‚úÖ features/music/MUSIC_MODULE.md
...
‚úÖ 136/136 docs rendered

Phase 3: Post-processing
‚úÖ TOC generated for 136 docs
‚úÖ Formatted 136 docs

Phase 4: Validation
‚úÖ YAML schema: 136/136 passed
‚úÖ Markdown lint: 136/136 passed
‚è≠Ô∏è  Link checking: Skipped (use --links to enable)
‚úÖ SOT references: 136/136 passed

Phase 5: Atomic write
‚úÖ Wrote 136 files to docs/dev/design/

Summary:
- Total docs: 136
- Changed: 23
- Unchanged: 113
- Errors: 0
- Time: 12.3s

Next steps:
1. Review changes: git diff docs/dev/design/
2. Run full validation: /validate-doc --all
3. Commit if satisfied: git add . && git commit
```

### Data Merging Strategy
```python
# Merge order (later overrides earlier):
merged_data = {
    **shared_sot_data,           # From SOURCE_OF_TRUTH.md
    **shared_category_data,      # From shared-features.yaml
    **doc_specific_data,         # From data/features/video/MOVIE_MODULE.yaml
}

# Special handling:
# - Lists: Extend (don't replace)
# - Dicts: Deep merge
# - Strings: Replace
```

### Error Handling
- If shared data missing: Error, can't proceed
- If doc data missing: Error, skip that doc
- If template rendering fails: Show Jinja2 error, skip that doc
- If validation fails: Show errors, don't write that doc
- If any doc fails and --all: Continue with others, report failures at end

### Performance
- **Single doc**: ~1-2s
- **Category (10-20 docs)**: ~5-10s
- **All docs (136)**: ~10-15s
- Use multiprocessing for --all (4-8 workers)

---

## Skill 3: validate-doc

### Purpose
Run comprehensive validation pipeline on generated documentation. Checks YAML schema, markdown formatting, links, SOT references, secrets.

### Usage
```bash
# Validate single doc
/validate-doc --doc MOVIE_MODULE

# Validate category
/validate-doc --category features/video

# Validate all docs
/validate-doc --all

# Run specific checks only
/validate-doc --all --checks yaml,lint,links
```

### Validation Checks

#### 1. YAML Schema Validation
- Use yamale with JSON schemas
- Check all required fields present
- Check types correct (string, int, array, etc.)
- Check enums valid (status emojis: ‚úÖüü°üî¥‚ö™)

#### 2. Markdown Linting
- Use markdownlint-cli
- Check formatting (headings, lists, code blocks)
- Check no bare URLs
- Check proper link syntax
- Config: `.markdownlint.json`

#### 3. Link Checking
- Use markdown-link-check
- Check internal links (relative paths exist)
- Check external links (HTTP 200)
- Config: `.markdown-link-check.json`
- **Note**: Slow, use --skip-links for fast validation

#### 4. SOT Reference Validation
- Parse SOT to extract all versions
- Parse doc to find version references
- Compare: "uses fx v1.23.0" ‚Üí check SOT has fx = v1.23.0
- Flag mismatches

#### 5. Secret Scanning
- Use gitleaks
- Scan generated docs for secrets (API keys, tokens, passwords)
- Fail if secrets found

#### 6. Frontmatter Validation
- Check YAML frontmatter valid
- Check sources list matches HTML comment (if exists)
- Check last_updated is recent date

### Parameters
- `--doc` (`-d`): Single doc name
- `--category` (`-c`): Category path
- `--all` (`-a`): Validate all docs
- `--checks`: Comma-separated list (yaml,lint,links,sot,secrets)
- `--skip-links`: Skip link checking (faster)
- `--fix`: Auto-fix issues if possible (lint formatting)

### Output
```
üîç Validating docs...

Scope: All (136 docs)

Running checks: yaml, lint, links, sot, secrets

[1/5] YAML Schema Validation
‚úÖ 135/136 passed
‚ùå 1 failed:
  - features/music/MUSIC_MODULE.yaml
    - Missing required field: implementation_phases
    - Invalid status: "üü¢" (must be one of: ‚úÖüü°üî¥‚ö™)

[2/5] Markdown Linting
‚úÖ 136/136 passed

[3/5] Link Checking (this may take a while...)
‚úÖ Internal links: 856/856 valid
‚ö†Ô∏è  External links: 127/132 valid, 5 timeouts
  - https://example.com/dead-link (404 Not Found)
  - https://slow-site.com/page (Timeout after 30s)

[4/5] SOT Reference Validation
‚úÖ 134/136 passed
‚ùå 2 mismatches:
  - features/video/MOVIE_MODULE.md:45
    - Doc references: fx v1.22.0
    - SOT has: fx v1.23.0
  - services/AUTH.md:78
    - Doc references: pgx v5.7.1
    - SOT has: pgx v5.7.2

[5/5] Secret Scanning
‚úÖ No secrets found

Summary:
- Total checks: 680 (136 docs √ó 5 checks)
- Passed: 674
- Warnings: 5
- Errors: 3
- Time: 45.2s

Failed docs:
1. features/music/MUSIC_MODULE.yaml (YAML schema)
2. features/video/MOVIE_MODULE.md (SOT reference)
3. services/AUTH.md (SOT reference)

Next steps:
1. Fix YAML schema errors: Edit data file, add missing fields
2. Fix SOT references: Regenerate docs: /generate-docs --doc MOVIE_MODULE AUTH
3. Investigate external link failures (may be transient)
```

### Error Handling
- If validation tool not installed: Error with install instructions
- If doc doesn't exist: Error, can't validate
- If validation times out: Warning, continue with other checks
- Non-zero exit code if any errors

---

## Skill 4: migrate-doc

### Purpose
Convert existing design doc to template-based format. Parses markdown, extracts structured data ‚Üí YAML, validates, renders from template.

### Usage
```bash
# Migrate single doc
/migrate-doc --doc docs/dev/design/features/video/MOVIE_MODULE.md

# Migrate category
/migrate-doc --category features/video

# Migrate all docs (with confirmation)
/migrate-doc --all

# Dry run (preview extraction)
/migrate-doc --doc MOVIE_MODULE.md --dry-run
```

### Flow
1. **Parse existing doc**:
   - Extract frontmatter (if exists)
   - Extract HTML comments: `<!-- SOURCES: ... -->`
   - Extract status table (7 dimensions)
   - Extract headings and sections
   - Extract code blocks (SQL, Go, etc.)
   - Extract lists (implementation checklists)
2. **Structure data**:
   - Map sections ‚Üí YAML fields
   - Parse status table ‚Üí 7 status + 7 notes fields
   - Parse implementation checklist ‚Üí phases list
   - Parse database schema ‚Üí tables list
3. **Generate YAML data file**:
   - `data/{category}/{DOC_NAME}.yaml`
4. **Validate YAML**:
   - JSON schema validation
5. **Render from template**:
   - Use template system
6. **Compare**:
   - Diff original vs generated
   - Show differences
7. **Confirm**:
   - Ask user to review diff
   - If approved: Replace original with generated
   - If rejected: Keep original, save YAML for later

### Parameters
- `--doc` (`-d`): Path to existing doc
- `--category` (`-c`): Category path (migrate all in category)
- `--all` (`-a`): Migrate all docs
- `--dry-run`: Show extraction, don't write files
- `--force`: Skip confirmation, overwrite
- `--keep-original`: Save original as `.original.md` backup

### Output
```
üîÑ Migrating doc: features/video/MOVIE_MODULE.md

Phase 1: Parsing existing doc
‚úÖ Extracted metadata (sources, design_refs)
‚úÖ Extracted status table (7 dimensions)
‚úÖ Extracted 3 database tables
‚úÖ Extracted 8 API endpoints
‚úÖ Extracted implementation checklist (6 phases, 32 tasks)

Phase 2: Generating YAML data file
‚úÖ Created: data/features/video/MOVIE_MODULE.yaml

Phase 3: Validating YAML
‚úÖ YAML schema passed

Phase 4: Rendering from template
‚úÖ Rendered: /tmp/MOVIE_MODULE.md

Phase 5: Comparing original vs generated
Lines changed: 12
Additions: 8
Deletions: 4

Differences:
  - Line 3: Added YAML frontmatter
  - Line 45: Reformatted status table (added "Module" row)
  - Line 120: Reformatted implementation checklist (structured phases)

Show full diff? [y/n]: y

[Shows git-style diff]

Approve migration? [y/n]: y

Phase 6: Atomic replacement
‚úÖ Backed up original: docs/dev/design/features/video/MOVIE_MODULE.md.original
‚úÖ Replaced with generated: docs/dev/design/features/video/MOVIE_MODULE.md

Summary:
- Migration successful
- Data file: data/features/video/MOVIE_MODULE.yaml
- Original backup: MOVIE_MODULE.md.original
- Template used: templates/feature.md.jinja2

Next steps:
1. Review migrated doc: docs/dev/design/features/video/MOVIE_MODULE.md
2. Review data file: data/features/video/MOVIE_MODULE.yaml
3. Refine data if needed, regenerate: /generate-docs --doc MOVIE_MODULE
4. Validate: /validate-doc --doc MOVIE_MODULE
5. Commit when satisfied
```

### Markdown Parser
**File**: `scripts/automation/markdown_parser.py`

Key functions:
```python
def extract_frontmatter(content: str) -> dict
def extract_html_comments(content: str) -> dict
def extract_status_table(content: str) -> dict
def extract_section(content: str, heading: str) -> str
def extract_code_blocks(content: str, language: str = None) -> list
def extract_implementation_checklist(content: str) -> list
```

### Error Handling
- If doc doesn't exist: Error
- If parsing fails: Show error, save partial YAML, continue
- If validation fails: Show errors, ask if user wants to fix YAML manually
- If rendering fails: Show Jinja2 error, keep original
- If user rejects migration: Keep original, save YAML for later refinement

---

## Skill 5: sync-configs

### Purpose
Synchronize all configuration files from SOURCE_OF_TRUTH.md. Updates IDE settings, CI/CD configs, language version files, linter configs based on tool versions in SOT.

### Usage
```bash
# Sync all configs
/sync-configs

# Sync specific config types
/sync-configs --types ide,cicd

# Dry run (preview changes)
/sync-configs --dry-run

# Force sync (skip confirmation)
/sync-configs --force
```

### Config Types

#### 1. IDE Settings
**Files updated**:
- `.vscode/settings.json` - VS Code settings
  - Go version, gopls version
  - Linter versions (golangci-lint)
  - Formatter settings
- `.zed/settings.json` - Zed settings
  - Language server versions
  - Formatter settings
- `.idea/` - JetBrains settings (if exists)

**Example sync**:
```
SOT: Go 1.25+, gopls latest
‚Üí .vscode/settings.json: "go.toolsManagement.checkForUpdates": "local"
‚Üí .zed/settings.json: "lsp": {"gopls": {"version": "latest"}}
```

#### 2. Language Version Files
**Files updated**:
- `.tool-versions` - asdf version manager
  ```
  golang 1.25.0
  nodejs 20.11.0
  python 3.12.1
  ```
- `.nvmrc` - Node version
  ```
  20.11.0
  ```
- `.python-version` - Python version
  ```
  3.12.1
  ```
- `go.mod` - Go version (first line)
  ```
  module github.com/lusoris/revenge

  go 1.25
  ```

#### 3. CI/CD Configs
**Files updated**:
- `.github/workflows/*.yml` - All workflow files
  - Update Go version in setup-go actions
  - Update Node version in setup-node actions
  - Update Python version in setup-python actions
  - Update tool versions (golangci-lint, ruff, markdownlint)

**Example**:
```yaml
# Before
- uses: actions/setup-go@v5
  with:
    go-version: '1.24'

# After (from SOT: Go 1.25+)
- uses: actions/setup-go@v5
  with:
    go-version: '1.25'
```

#### 4. Linter Configs
**Files updated**:
- `.golangci.yml` - golangci-lint version comment
- `ruff.toml` - ruff version comment
- `.markdownlint.json` - markdownlint version comment

#### 5. Docker Configs
**Files updated**:
- `Dockerfile` - Base image versions
  ```dockerfile
  # Before
  FROM golang:1.24-alpine

  # After (from SOT)
  FROM golang:1.25-alpine
  ```
- `docker-compose.yml` - Service image versions
- `.coder/template.tf` - Coder workspace image versions

### Flow
1. **Parse SOT**: Extract Development Tools table
2. **For each tool**:
   - Get version from SOT
   - Get config sync paths from SOT table
   - For each config file:
     - Read current file
     - Update version references
     - Validate syntax (JSON/YAML/TOML)
     - Show diff
3. **Confirm changes**: Show all diffs, ask user to approve
4. **Atomic write**: Write all configs atomically
5. **Validate**: Run syntax checks on updated configs

### Parameters
- `--types`: Comma-separated config types (ide,lang,cicd,lint,docker)
- `--dry-run`: Preview changes without writing
- `--force`: Skip confirmation
- `--validate`: Run extra validation (e.g., golangci-lint config validate)

### Output
```
üîÑ Syncing configs from SOURCE_OF_TRUTH.md...

Parsed Development Tools table:
- Go: 1.25+ ‚Üí 8 config files
- Node: 20.x ‚Üí 5 config files
- Python: 3.12+ ‚Üí 4 config files
- golangci-lint: v1.61.0 ‚Üí 2 config files
- ruff: 0.4+ ‚Üí 2 config files
- Docker: 27+ ‚Üí 3 config files

Total: 24 config files to update

[1/24] .tool-versions
  golang 1.24.0 ‚Üí 1.25.0

[2/24] .nvmrc
  20.10.0 ‚Üí 20.11.0

[3/24] go.mod
  go 1.24 ‚Üí go 1.25

[4/24] .github/workflows/ci.yml
  go-version: '1.24' ‚Üí '1.25'

...

[24/24] .coder/template.tf
  golang:1.24-alpine ‚Üí golang:1.25-alpine

Summary:
- Files updated: 24
- Go version: 1.24 ‚Üí 1.25
- Node version: 20.10.0 ‚Üí 20.11.0
- Python version: 3.11 ‚Üí 3.12
- golangci-lint: v1.60.0 ‚Üí v1.61.0

Approve changes? [y/n]: y

Writing files...
‚úÖ Updated 24 config files

Validating...
‚úÖ All configs valid

Next steps:
1. Test updated configs locally:
   - go version (should show 1.25)
   - node --version (should show 20.11.0)
   - python --version (should show 3.12)
2. Commit changes:
   git add .tool-versions .nvmrc go.mod .github/workflows/
   git commit -m "chore: sync tool versions from SOT"
```

### Error Handling
- If SOT parsing fails: Error, can't proceed
- If config file doesn't exist: Warning, skip
- If syntax validation fails: Error, don't write that file
- If user rejects changes: Exit without writing

---

## Skill 6: check-automation

### Purpose
Check health of documentation automation system. Verifies dependencies installed, configs valid, templates renderable, no stale locks.

### Usage
```bash
# Full health check
/check-automation

# Quick check (skip slow tests)
/check-automation --quick

# Fix issues automatically
/check-automation --fix
```

### Checks

#### 1. Dependencies
- Python version >= 3.12
- Python packages installed (pyyaml, jinja2, yamale, etc.)
- Node version >= 20.x
- npm packages installed (markdown-link-check, markdown-toc)
- gitleaks installed
- Git configured (user.name, user.email)
- Bot user configured (if exists)

#### 2. Directory Structure
- `templates/` exists
- `schemas/` exists
- `data/` exists
- `.github/automation-config.yml` exists

#### 3. Templates
- Base template exists, renders successfully
- Feature/service/integration templates exist
- No Jinja2 syntax errors
- All templates inherit from base correctly

#### 4. Schemas
- JSON schemas exist for all doc types
- JSON schemas valid (no syntax errors)
- Schemas match template variables

#### 5. SOT Parsing
- SOURCE_OF_TRUTH.md exists
- SOT parser works
- Can extract Go dependencies, tools, infrastructure

#### 6. Automation State
- No stale locks (`.automation-lock` > 1 hour old)
- No failed runs (check recent GitHub Actions runs)
- No open automation-failure issues

#### 7. Config Files
- automation-config.yml valid YAML
- All referenced tools in config exist in SOT
- CI/CD workflows reference correct tool versions

### Output
```
üîç Checking automation system health...

[1/7] Dependencies
‚úÖ Python 3.12.1 (required: 3.12+)
‚úÖ pyyaml 6.0.1
‚úÖ jinja2 3.1.5
‚úÖ yamale 4.0.4
‚úÖ Node 20.11.0 (required: 20.x)
‚úÖ markdown-link-check 3.12.1
‚úÖ markdown-toc 1.2.0
‚úÖ gitleaks 8.18.1
‚úÖ Git 2.43.0 configured

[2/7] Directory Structure
‚úÖ templates/ exists
‚úÖ schemas/ exists
‚úÖ data/ exists
‚úÖ .github/automation-config.yml exists

[3/7] Templates
‚úÖ base.md.jinja2 renders
‚úÖ feature.md.jinja2 renders
‚úÖ service.md.jinja2 renders
‚úÖ integration.md.jinja2 renders

[4/7] Schemas
‚úÖ feature.schema.json valid
‚úÖ service.schema.json valid
‚úÖ integration.schema.json valid

[5/7] SOT Parsing
‚úÖ SOURCE_OF_TRUTH.md exists
‚úÖ SOT parser works
‚úÖ Extracted 157 Go dependencies
‚úÖ Extracted 12 development tools

[6/7] Automation State
‚úÖ No stale locks
‚ö†Ô∏è  1 failed run in last 7 days:
  - Run #1234 (2026-01-30): doc-generation workflow failed
  - Error: YAML schema validation failed
  - Issue created: #567
‚úÖ No open automation-failure issues (last issue resolved 2 days ago)

[7/7] Config Files
‚úÖ automation-config.yml valid
‚úÖ All tools in config exist in SOT
‚ö†Ô∏è  1 version mismatch:
  - CI workflow uses Go 1.24, SOT has 1.25
  - Fix with: /sync-configs

Summary:
- Status: ‚ö†Ô∏è  HEALTHY WITH WARNINGS
- Checks passed: 23/25
- Warnings: 2
- Errors: 0

Warnings:
1. Failed run in last 7 days (already resolved, issue closed)
2. Go version mismatch in CI workflow

Recommendations:
1. Sync configs to fix Go version: /sync-configs
2. Monitor next doc-generation run to ensure issue doesn't recur

System is operational. Automation can proceed.
```

### Parameters
- `--quick`: Skip slow checks (link validation, external API calls)
- `--fix`: Auto-fix issues if possible (clear stale locks, sync configs)
- `--verbose`: Show detailed output for each check

### Error Handling
- If critical dependency missing: Error, list install command
- If templates broken: Error, show Jinja2 errors
- If SOT parsing fails: Error, show line where parsing failed
- Non-zero exit code if any errors

---

## Implementation Notes

### Skill File Structure
Each skill is a Python script in `.claude/skills/`:

```
.claude/skills/
  scaffold-doc.py
  generate-docs.py
  validate-doc.py
  migrate-doc.py
  sync-configs.py
  check-automation.py
  common/                   # Shared utilities
    __init__.py
    sot_parser.py          # Reuse from scripts/automation/
    template_renderer.py
    validator.py
    git_utils.py
```

### Common Utilities
**File**: `.claude/skills/common/template_renderer.py`
```python
from jinja2 import Environment, FileSystemLoader, StrictUndefined, SandboxedEnvironment
from pathlib import Path

def render_template(template_name: str, data: dict, output_path: Path):
    """Render Jinja2 template with data."""
    env = SandboxedEnvironment(
        loader=FileSystemLoader('templates/'),
        undefined=StrictUndefined,
        autoescape=False,
        trim_blocks=True,
        lstrip_blocks=True,
    )
    template = env.get_template(template_name)
    content = template.render(**data)

    with open(output_path, 'w') as f:
        f.write(content)
```

### Testing
Each skill should have:
- Unit tests: Test individual functions
- Integration tests: Test full flow with temp directory
- Example usage in docstring

### Documentation
Each skill Python file starts with:
```python
#!/usr/bin/env python3
"""
Skill: scaffold-doc

Purpose: Create new design document from templates interactively.

Usage:
    /scaffold-doc
    /scaffold-doc --type feature --name "Podcast Module"

Examples:
    # Interactive mode
    $ /scaffold-doc

    # With parameters
    $ /scaffold-doc --type feature --name "Podcast Module" --category features/podcasts

See: .analysis/17_CLAUDE_SKILLS_SPECIFICATION.md for full specification
"""
```

---

## Next Steps

1. **Implement skills** in `.claude/skills/` (Phase 1, Day 1)
2. **Test each skill** with realistic data
3. **Document usage** in `.claude/CLAUDE.md`
4. **Create skill tests** in `tests/skills/`

---

**Status**: Specification complete, ready for implementation
**Files to create**: 6 skill Python scripts + common utilities

