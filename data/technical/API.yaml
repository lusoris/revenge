doc_title: API Reference
doc_category: technical
created_date: '2026-01-31'
overall_status: âœ… Complete
status_design: âœ…
status_design_notes: Complete API reference
status_sources: âœ…
status_sources_notes: All API tools documented
status_instructions: âœ…
status_instructions_notes: Generated from design
status_code: ðŸ”´
status_code_notes: '-'
status_linting: ðŸ”´
status_linting_notes: '-'
status_unit_testing: ðŸ”´
status_unit_testing_notes: '-'
status_integration_testing: ðŸ”´
status_integration_testing_notes: '-'
technical_summary: '> REST API reference with OpenAPI specification and ogen code
  generation


  Complete API documentation for Revenge:

  - **OpenAPI 3.1**: Full specification with ogen generator

  - **Authentication**: Bearer token (JWT) and API keys

  - **Versioning**: `/api/v1/` with backward compatibility

  - **Rate Limiting**: User-based and IP-based limits

  - **Error Handling**: Standardized RFC 7807 Problem Details

  '
wiki_tagline: '> Developer API reference for building custom clients

  '
wiki_overview: 'The Revenge API lets you build custom clients and integrations. All
  endpoints use REST conventions with JSON request/response bodies. Authentication
  uses JWT tokens (for users) or API keys (for services). The API follows OpenAPI
  3.1 specification - you can view the full spec at /api/openapi.json. Rate limiting
  protects the server from overload. Errors use RFC 7807 Problem Details format for
  consistent error handling across all endpoints.

  '
sources:
- name: ogen OpenAPI Generator
  url: https://pkg.go.dev/github.com/ogen-go/ogen
  note: Auto-resolved from ogen
- name: OpenAPI 3.1 Specification
  url: https://spec.openapis.org/oas/v3.1.0
  note: API spec standard
- name: RFC 7807 Problem Details
  url: https://datatracker.ietf.org/doc/html/rfc7807
  note: Standardized error format
design_refs:
- title: technical
  path: INDEX.md
- title: 01_ARCHITECTURE
  path: ../architecture/01_ARCHITECTURE.md
- title: 02_DESIGN_PRINCIPLES
  path: ../architecture/02_DESIGN_PRINCIPLES.md
api_version: v1
base_path: /api/v1
openapi_spec_location: api/openapi/spec.yaml
authentication:
  methods:
  - name: Bearer Token (JWT)
    description: JWT token in Authorization header
    example: 'Authorization: Bearer eyJhbGc...'
    use_case: User authentication
  - name: API Key
    description: API key in X-API-Key header
    example: 'X-API-Key: xyz123...'
    use_case: Service-to-service, webhooks
  jwt_claims:
  - sub: User ID (UUID)
  - exp: Expiration timestamp
  - iat: Issued at timestamp
  - scopes: Array of permissions
api_namespaces:
- namespace: /api/v1/auth/*
  purpose: Authentication (login, logout, refresh)
  auth_required: false
  rate_limit: 10 req/min per IP
- namespace: /api/v1/users/*
  purpose: User management
  auth_required: true
  scopes:
  - user:read
  - user:write
- namespace: /api/v1/movies/*
  purpose: Movie content
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/tv/*
  purpose: TV content
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/music/*
  purpose: Music content
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/audiobooks/*
  purpose: Audiobook content
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/podcasts/*
  purpose: Podcast content
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/photos/*
  purpose: Photo library
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/livetv/*
  purpose: Live TV and EPG
  auth_required: true
  scopes:
  - content:read
- namespace: /api/v1/legacy/*
  purpose: QAR content (adult)
  auth_required: true
  scopes:
  - legacy:read
- namespace: /api/v1/admin/*
  purpose: Admin operations
  auth_required: true
  scopes:
  - admin:*
rate_limiting:
  strategy: Token bucket per user/IP
  default_limits:
  - tier: Authenticated User
    requests_per_minute: 60
    burst: 10
  - tier: Anonymous (IP)
    requests_per_minute: 10
    burst: 2
  - tier: API Key (Service)
    requests_per_minute: 300
    burst: 50
  headers:
  - X-RateLimit-Limit: Max requests per window
  - X-RateLimit-Remaining: Remaining requests
  - X-RateLimit-Reset: Unix timestamp when limit resets
error_responses: "**RFC 7807 Problem Details Format**:\n\n```json\n{\n  \"type\":\
  \ \"https://docs.revenge.dev/errors/not-found\",\n  \"title\": \"Movie Not Found\"\
  ,\n  \"status\": 404,\n  \"detail\": \"Movie with ID 'uuid-123' does not exist\"\
  ,\n  \"instance\": \"/api/v1/movies/uuid-123\",\n  \"trace_id\": \"abc123...\"\n\
  }\n```\n\n**Standard Error Codes**:\n- `400` Bad Request - Invalid input\n- `401`\
  \ Unauthorized - Missing or invalid authentication\n- `403` Forbidden - Insufficient\
  \ permissions\n- `404` Not Found - Resource doesn't exist\n- `409` Conflict - Resource\
  \ conflict (duplicate)\n- `422` Unprocessable Entity - Validation error\n- `429`\
  \ Too Many Requests - Rate limit exceeded\n- `500` Internal Server Error - Unexpected\
  \ error\n- `503` Service Unavailable - Temporary outage\n"
pagination:
  strategy: Cursor-based pagination
  query_params:
  - cursor (string): Opaque cursor for next page
  - limit (int): Number of results (max 100, default 20)
  response_format: "```json\n{\n  \"data\": [...],\n  \"pagination\": {\n    \"cursor\"\
    : \"next-page-cursor\",\n    \"has_more\": true,\n    \"total\": 1234\n  }\n}\n\
    ```\n"
filtering:
  query_param_patterns:
  - filter[field]: Exact match
  - filter[field][eq]: Equals
  - filter[field][ne]: Not equals
  - filter[field][gt]: Greater than
  - filter[field][gte]: Greater than or equal
  - filter[field][lt]: Less than
  - filter[field][lte]: Less than or equal
  - filter[field][in]: In array
  - filter[field][contains]: Contains substring
  example: /api/v1/movies?filter[year][gte]=2020&filter[genre][in]=Action,Thriller
sorting:
  query_param: sort
  format: field1,-field2 (- prefix for descending)
  example: /api/v1/movies?sort=title,-year
openapi_generation:
  generator: ogen
  spec_location: api/openapi/spec.yaml
  generated_code: internal/api/ogen/
  regenerate_command: go generate ./api/openapi/
request_examples: "**GET /api/v1/movies**:\n```bash\ncurl -H \"Authorization: Bearer\
  \ $TOKEN\" \\\n     \"https://revenge.dev/api/v1/movies?limit=20&sort=-year\"\n\
  ```\n\n**POST /api/v1/movies**:\n```bash\ncurl -X POST \\\n     -H \"Authorization:\
  \ Bearer $TOKEN\" \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"\
  title\": \"Inception\", \"year\": 2010}' \\\n     \"https://revenge.dev/api/v1/movies\"\
  \n```\n"
cors_policy: '**Development**:

  - Allow origins: http://localhost:5173 (Vite dev server)


  **Production**:

  - Allow origins: Same origin only (or configured domains)

  - Credentials: true

  - Methods: GET, POST, PUT, PATCH, DELETE, OPTIONS

  - Headers: Authorization, Content-Type, X-API-Key

  '
versioning_strategy: '**Current Version**: v1 (`/api/v1/`)


  **Future Versioning**:

  - Major versions in URL path (`/api/v2/`)

  - Minor changes backward compatible (no version change)

  - Deprecation notices 6 months before removal

  - Sunset header for deprecated endpoints

  '
