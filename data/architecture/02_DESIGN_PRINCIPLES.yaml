doc_title: Revenge - Design Principles
doc_category: architecture
created_date: '2026-01-31'
overall_status: âœ… Complete
status_design: âœ…
status_design_notes: '-'
status_sources: âšª
status_sources_notes: '-'
status_instructions: âœ…
status_instructions_notes: Generated from design
status_code: ðŸ”´
status_code_notes: '-'
status_linting: ðŸ”´
status_linting_notes: '-'
status_unit_testing: ðŸ”´
status_unit_testing_notes: '-'
status_integration_testing: ðŸ”´
status_integration_testing_notes: '-'
technical_summary: |
  > Core design principles and patterns guiding Revenge development

  Key principles:
  - **PostgreSQL Only**: No SQLite - simplifies codebase, pgx is best driver
  - **80% Test Coverage**: Required minimum for all packages
  - **Local-First Metadata**: Always prefer cached/local data over external APIs
  - **Table-Driven Tests**: testify + mockery for consistent testing
  - **Sentinel Errors**: Type-safe error handling with wrapped contexts

wiki_tagline: '> The philosophy behind how Revenge is built'

wiki_overview: 'Revenge follows strict design principles for maintainability and performance. PostgreSQL is the only supported database - no SQLite complexity. All code requires 80% minimum test coverage with table-driven tests. Metadata always comes from local cache first, then Arr services, then external APIs. Error handling uses sentinel errors for type safety. Logging is text in development (tint) and JSON in production (zap). These principles ensure consistent, testable, performant code.'
sources:
- name: Dragonfly Documentation
  url: https://www.dragonflydb.io/docs
  note: Auto-resolved from dragonfly
- name: FFmpeg Documentation
  url: https://ffmpeg.org/ffmpeg.html
  note: Auto-resolved from ffmpeg
- name: FFmpeg Codecs
  url: https://ffmpeg.org/ffmpeg-codecs.html
  note: Auto-resolved from ffmpeg-codecs
- name: FFmpeg Formats
  url: https://ffmpeg.org/ffmpeg-formats.html
  note: Auto-resolved from ffmpeg-formats
- name: go-astiav (FFmpeg bindings)
  url: https://pkg.go.dev/github.com/asticode/go-astiav
  note: Auto-resolved from go-astiav
- name: go-astiav GitHub README
  url: https://github.com/asticode/go-astiav
  note: Auto-resolved from go-astiav-docs
- name: gohlslib (HLS)
  url: https://pkg.go.dev/github.com/bluenviron/gohlslib/v2
  note: Auto-resolved from gohlslib
- name: M3U8 Extended Format
  url: https://datatracker.ietf.org/doc/html/rfc8216
  note: Auto-resolved from m3u8
- name: River Job Queue
  url: https://pkg.go.dev/github.com/riverqueue/river
  note: Auto-resolved from river
- name: shadcn-svelte
  url: https://www.shadcn-svelte.com/docs
  note: Auto-resolved from shadcn-svelte
- name: Svelte 5 Runes
  url: https://svelte.dev/docs/svelte/$state
  note: Auto-resolved from svelte-runes
- name: Svelte 5 Documentation
  url: https://svelte.dev/docs/svelte/overview
  note: Auto-resolved from svelte5
- name: SvelteKit Documentation
  url: https://svelte.dev/docs/kit/introduction
  note: Auto-resolved from sveltekit
- name: TanStack Query
  url: https://tanstack.com/query/latest/docs/framework/svelte/overview
  note: Auto-resolved from tanstack-query
- name: Typesense API
  url: https://typesense.org/docs/latest/api/
  note: Auto-resolved from typesense
- name: Typesense Go Client
  url: https://github.com/typesense/typesense-go
  note: Auto-resolved from typesense-go
design_refs:
- title: architecture
  path: architecture/INDEX.md
- title: ADULT_CONTENT_SYSTEM
  path: ADULT_CONTENT_SYSTEM.md
- title: ADULT_METADATA
  path: ADULT_METADATA.md
- title: DATA_RECONCILIATION
  path: DATA_RECONCILIATION.md
