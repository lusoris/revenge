doc_title: Development Environment Setup
doc_category: operations
created_date: '2026-01-31'
overall_status: âœ… Complete
status_design: âœ…
status_design_notes: Complete developer setup guide
status_sources: âœ…
status_sources_notes: All tools documented
status_instructions: âœ…
status_instructions_notes: Generated from design
status_code: ðŸ”´
status_code_notes: '-'
status_linting: ðŸ”´
status_linting_notes: '-'
status_unit_testing: ðŸ”´
status_unit_testing_notes: '-'
status_integration_testing: ðŸ”´
status_integration_testing_notes: '-'
technical_summary: '> Local development environment setup with Go, Node.js, PostgreSQL,
  and hot reload


  Complete guide for setting up Revenge development environment:

  - **Prerequisites**: Go 1.25+, Node.js 20.x, PostgreSQL 18+, Python 3.12

  - **Hot Reload**: air for Go backend, Vite for frontend

  - **Database**: PostgreSQL only (no SQLite support)

  - **Build Flags**: GOEXPERIMENT=greenteagc,jsonv2

  '
wiki_tagline: '> Get your local development environment running in minutes

  '
wiki_overview: 'This guide walks you through setting up Revenge for local development.
  You will install the required tools (Go 1.25+, Node.js 20, PostgreSQL 18), configure
  the database, and start the development servers with hot reload. The backend uses
  air for instant rebuilds on code changes, while the frontend uses Vite for blazing-fast
  HMR. Includes troubleshooting tips for common issues and useful Makefile commands
  to streamline your workflow.

  '
sources:
- name: Go Installation
  url: https://go.dev/doc/install
  note: Official Go installation guide
- name: air Hot Reload
  url: https://github.com/air-verse/air
  note: Go hot reload tool
- name: Vite
  url: https://vitejs.dev/guide/
  note: Frontend build tool
- name: PostgreSQL Downloads
  url: https://www.postgresql.org/download/
  note: PostgreSQL installation
- name: Node.js Downloads
  url: https://nodejs.org/
  note: Node.js LTS releases
- name: sqlc
  url: https://docs.sqlc.dev/en/stable/
  note: SQL code generation
- name: Conventional Commits
  url: https://www.conventionalcommits.org/
  note: Commit message format
design_refs:
- title: operations
  path: INDEX.md
- title: TECH_STACK
  path: ../technical/TECH_STACK.md
- title: BEST_PRACTICES
  path: ../operations/BEST_PRACTICES.md
- title: 00_SOURCE_OF_TRUTH
  path: ../00_SOURCE_OF_TRUTH.md
operation_name: Development Environment Setup
prerequisites:
  go:
    version: 1.25.6
    minimum: 1.25.0
    notes: Required for greenteagc and jsonv2 experiments
    install_url: https://go.dev/doc/install
    verify_command: go version
  nodejs:
    version: 20.x
    minimum: 20.0.0
    notes: LTS version for frontend development
    install_url: https://nodejs.org/
    verify_command: node --version
  python:
    version: 3.12
    minimum: 3.12.0
    notes: Required for automation scripts
    install_url: https://www.python.org/downloads/
    verify_command: python --version
  postgresql:
    version: 18.1
    minimum: 18.0.0
    notes: PostgreSQL ONLY - no SQLite support
    install_url: https://www.postgresql.org/download/
    verify_command: psql --version
  git:
    version: 2.40+
    notes: Version control
    install_url: https://git-scm.com/downloads
    verify_command: git --version
environment_setup: '## Clone Repository


  ```bash

  git clone https://github.com/yourorg/revenge.git

  cd revenge

  ```


  ## Install Go Dependencies


  ```bash

  go mod download

  ```


  ## Install Node.js Dependencies


  ```bash

  cd frontend

  npm install

  cd ..

  ```


  ## Install Python Dependencies (for automation scripts)


  ```bash

  python -m venv .venv

  source .venv/bin/activate  # On Windows: .venv\Scripts\activate

  pip install -r scripts/requirements.txt

  ```


  ## Install Development Tools


  ```bash

  # air (Go hot reload)

  go install github.com/air-verse/air@latest


  # sqlc (SQL code generation)

  go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest


  # mockery (mock generation)

  go install github.com/vektra/mockery/v2@latest


  # golangci-lint (linter)

  curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh
  | sh -s -- -b $(go env GOPATH)/bin

  ```

  '
database_setup: '## Create PostgreSQL Database


  ```bash

  # Start PostgreSQL (if not running)

  # Linux:

  sudo systemctl start postgresql


  # macOS (Homebrew):

  brew services start postgresql@18


  # Create database

  createdb revenge_dev


  # Create test database

  createdb revenge_test

  ```


  ## Run Migrations


  ```bash

  # Apply all migrations

  make migrate-up


  # Or manually:

  go run cmd/migrate/main.go up

  ```


  ## Seed Data (Optional)


  ```bash

  # Load sample data for testing

  psql revenge_dev < scripts/seed/sample_data.sql

  ```

  '
configuration: '## Environment Variables


  Create `.env` file in project root:


  ```bash

  # Server

  REVENGE_SERVER_PORT=8080

  REVENGE_SERVER_HOST=localhost


  # Database

  REVENGE_DATABASE_URL=postgres://postgres:postgres@localhost:5432/revenge_dev?sslmode=disable


  # Dragonfly (Redis-compatible cache)

  REVENGE_CACHE_URL=redis://localhost:6379


  # Typesense (search)

  REVENGE_TYPESENSE_URL=http://localhost:8108

  REVENGE_TYPESENSE_API_KEY=dev_key


  # Development mode

  REVENGE_ENV=development

  REVENGE_LOG_LEVEL=debug

  ```


  ## Start Infrastructure (Docker Compose)


  ```bash

  # Start Dragonfly, Typesense, Jaeger

  docker-compose -f docker-compose.dev.yml up -d

  ```

  '
running_development_server: '## Backend (Go with Hot Reload)


  ```bash

  # Using air (hot reload)

  air


  # Or manually:

  GOEXPERIMENT=greenteagc,jsonv2 go run cmd/server/main.go

  ```


  Backend runs at: http://localhost:8080


  ## Frontend (SvelteKit with Vite)


  ```bash

  cd frontend

  npm run dev

  ```


  Frontend runs at: http://localhost:5173


  ## Full Stack Development


  Run both in separate terminals, or use:


  ```bash

  # Terminal 1: Backend

  air


  # Terminal 2: Frontend

  cd frontend && npm run dev


  # Terminal 3: Infrastructure

  docker-compose -f docker-compose.dev.yml up

  ```

  '
hot_reload_configuration: '## Backend: air Configuration


  `.air.toml` is pre-configured with:

  - Watch Go files in `cmd/`, `internal/`, `pkg/`

  - Rebuild on save

  - Restart server automatically

  - Exclude `_test.go` files from triggering rebuild


  ## Frontend: Vite Configuration


  Vite HMR (Hot Module Replacement) is built-in:

  - Instant updates on save

  - No full page reload for most changes

  - Configure in `frontend/vite.config.ts`

  '
code_generation: '## Generate SQL Queries (sqlc)


  ```bash

  # Generate type-safe Go code from SQL

  sqlc generate


  # Watch mode (re-generate on SQL file changes)

  sqlc generate --watch

  ```


  ## Generate Mocks (mockery)


  ```bash

  # Generate all mocks

  mockery


  # Generate for specific interface

  mockery --name=Repository --dir=internal/content/movie

  ```


  ## Generate API Client (ogen)


  ```bash

  # Generate from OpenAPI spec

  go generate ./...

  ```

  '
testing_during_development: '## Run Unit Tests


  ```bash

  # All tests

  go test ./...


  # With coverage

  go test -coverprofile=coverage.out ./...

  go tool cover -html=coverage.out


  # Specific package

  go test ./internal/content/movie/...


  # Watch mode (using entr)

  ls **/*.go | entr -c go test ./...

  ```


  ## Run Integration Tests


  ```bash

  # Integration tests (requires Docker)

  go test -tags=integration ./...

  ```


  ## Run Frontend Tests


  ```bash

  cd frontend


  # Unit tests

  npm run test


  # E2E tests

  npm run test:e2e

  ```

  '
linting_and_formatting: '## Go Linting


  ```bash

  # Run all linters

  golangci-lint run


  # Fix auto-fixable issues

  golangci-lint run --fix


  # Format code

  go fmt ./...

  ```


  ## Frontend Linting


  ```bash

  cd frontend


  # ESLint

  npm run lint


  # Format with Prettier

  npm run format

  ```


  ## Python Linting


  ```bash

  # Activate venv

  source .venv/bin/activate


  # Ruff (linter + formatter)

  ruff check scripts/

  ruff format scripts/

  ```

  '
git_workflow: '## Branch Strategy


  - `main` - Production-ready code

  - `develop` - Integration branch

  - `feature/*` - New features

  - `fix/*` - Bug fixes

  - `docs/*` - Documentation changes


  ## Commit Messages


  Follow [Conventional Commits](https://www.conventionalcommits.org/):


  ```

  feat: add user authentication

  fix: resolve database connection issue

  docs: update API documentation

  test: add unit tests for movie service

  refactor: simplify metadata parsing

  ```


  Git hooks enforce this format automatically.


  ## Pre-Commit Hooks


  Pre-commit hooks run automatically:

  - Go formatting (`go fmt`)

  - Linting (`golangci-lint`)

  - Test coverage check (minimum 80%)

  - Commit message validation

  '
common_issues: '### Issue: `go build` fails with "unknown GOEXPERIMENT"


  **Solution**: Ensure Go 1.25+ is installed. Run `go version`.


  ---


  ### Issue: PostgreSQL connection refused


  **Solution**:

  1. Check PostgreSQL is running: `pg_isready`

  2. Verify connection string in `.env`

  3. Ensure database exists: `psql -l | grep revenge_dev`


  ---


  ### Issue: air not rebuilding on changes


  **Solution**:

  1. Check `.air.toml` is present

  2. Verify file watchers aren''t exhausted (Linux): `echo fs.inotify.max_user_watches=524288
  | sudo tee -a /etc/sysctl.conf && sudo sysctl -p`


  ---


  ### Issue: Frontend HMR not working


  **Solution**:

  1. Check `vite.config.ts` server settings

  2. Ensure backend CORS allows `http://localhost:5173`

  3. Clear Vite cache: `rm -rf frontend/node_modules/.vite`


  ---


  ### Issue: "sqlc: no such file or directory"


  **Solution**: Install sqlc: `go install github.com/sqlc-dev/sqlc/cmd/sqlc@latest`


  ---


  ### Issue: Tests fail with "database does not exist"


  **Solution**: Create test database: `createdb revenge_test`


  ---


  ### Issue: Docker containers fail to start


  **Solution**:

  1. Check Docker is running: `docker ps`

  2. Check port conflicts: `lsof -i :6379 -i :8108`

  3. Restart: `docker-compose -f docker-compose.dev.yml restart`

  '
useful_commands: '```bash

  # Development

  make dev              # Start full stack (backend + frontend + infra)

  make backend          # Start backend only

  make frontend         # Start frontend only


  # Database

  make migrate-up       # Apply migrations

  make migrate-down     # Rollback last migration

  make db-reset         # Drop + recreate + migrate


  # Code Generation

  make generate         # Run all generators (sqlc, mockery, ogen)

  make sqlc             # Generate SQL code

  make mocks            # Generate mocks


  # Testing

  make test             # Run unit tests

  make test-integration # Run integration tests

  make test-coverage    # Generate coverage report


  # Linting

  make lint             # Run all linters

  make fmt              # Format all code


  # Build

  make build            # Build backend binary

  make build-frontend   # Build frontend

  ```

  '
ide_setup: "## VS Code\n\nRecommended extensions:\n- `golang.go` - Go language support\n\
  - `svelte.svelte-vscode` - Svelte support\n- `bradlc.vscode-tailwindcss` - Tailwind\
  \ CSS IntelliSense\n- `dbaeumer.vscode-eslint` - ESLint\n\nSettings in `.vscode/settings.json`:\n\
  ```json\n{\n  \"go.buildTags\": \"integration\",\n  \"go.lintTool\": \"golangci-lint\"\
  ,\n  \"editor.formatOnSave\": true\n}\n```\n\n## JetBrains GoLand\n\n1. Import project\
  \ as Go module\n2. Set Go version to 1.25+\n3. Enable GOEXPERIMENT: `greenteagc,jsonv2`\
  \ in Run Configurations\n4. Configure PostgreSQL data source\n\n## Zed\n\nConfiguration\
  \ in `.zed/settings.json`\n"
next_steps: "After setup:\n\n1. **Explore Codebase**\n   - Read [ARCHITECTURE.md](architecture/01_ARCHITECTURE.md)\n\
  \   - Review [DESIGN_PRINCIPLES.md](architecture/02_DESIGN_PRINCIPLES.md)\n\n2.\
  \ **Run Tests**\n   - `make test` to ensure everything works\n   - Check coverage:\
  \ `make test-coverage`\n\n3. **Start Contributing**\n   - Pick an issue from GitHub\n\
  \   - Create feature branch: `git checkout -b feature/your-feature`\n   - Follow\
  \ [BEST_PRACTICES.md](operations/BEST_PRACTICES.md)\n\n4. **Join Community**\n \
  \  - GitHub Discussions for Q&A\n   - Discord for real-time chat\n"
