doc_title: Audiobook Module
doc_category: feature
created_date: '2026-01-31'
overall_status: âœ… Complete
status_design: âœ…
status_design_notes: Complete audiobook module design
status_sources: âœ…
status_sources_notes: All audiobook APIs documented
status_instructions: âœ…
status_instructions_notes: Generated from design
status_code: ğŸ”´
status_code_notes: '-'
status_linting: ğŸ”´
status_linting_notes: '-'
status_unit_testing: ğŸ”´
status_unit_testing_notes: '-'
status_integration_testing: ğŸ”´
status_integration_testing_notes: '-'
technical_summary: '> Audiobook content management with metadata enrichment from Audnexus
  and OpenLibrary


  Complete audiobook library:

  - **Chaptarr Integration**: Automated audiobook management and metadata sync

  - **Metadata Sources**: Audnexus (primary), OpenLibrary, Goodreads

  - **Supported Formats**: M4B (with chapters), MP3 (multi-file), AAC

  - **Chapter Navigation**: Jump to chapters, bookmarks, progress tracking

  - **Playback**: Variable speed (0.5x-3x), sleep timer, per-user resume'
wiki_tagline: '> Your audiobook library with chapter navigation and progress sync'
wiki_overview: The Audiobook Module provides a complete audiobook experience with
  support for chapter navigation, progress tracking, and multi-device synchronization.
  It integrates with Chaptarr for automated audiobook management and uses Audnexus
  for rich metadata including narrators, publishers, and book descriptions. Resume
  playback across devices and adjust playback speed to your preference.
sources:
- name: Audnexus API
  url: https://api.audnex.us/
  note: Auto-resolved from audnexus
- name: Uber fx
  url: https://pkg.go.dev/go.uber.org/fx
  note: Auto-resolved from fx
- name: ogen OpenAPI Generator
  url: https://pkg.go.dev/github.com/ogen-go/ogen
  note: Auto-resolved from ogen
- name: Open Library API
  url: https://openlibrary.org/developers/api
  note: Auto-resolved from openlibrary
- name: pgx PostgreSQL Driver
  url: https://pkg.go.dev/github.com/jackc/pgx/v5
  note: Auto-resolved from pgx
- name: PostgreSQL Arrays
  url: https://www.postgresql.org/docs/current/arrays.html
  note: Auto-resolved from postgresql-arrays
- name: PostgreSQL JSON Functions
  url: https://www.postgresql.org/docs/current/functions-json.html
  note: Auto-resolved from postgresql-json
- name: River Job Queue
  url: https://pkg.go.dev/github.com/riverqueue/river
  note: Auto-resolved from river
- name: sqlc
  url: https://docs.sqlc.dev/en/stable/
  note: Auto-resolved from sqlc
- name: sqlc Configuration
  url: https://docs.sqlc.dev/en/stable/reference/config.html
  note: Auto-resolved from sqlc-config
design_refs:
- title: 01_ARCHITECTURE
  path: ../../architecture/01_ARCHITECTURE.md
- title: 02_DESIGN_PRINCIPLES
  path: ../../architecture/02_DESIGN_PRINCIPLES.md
- title: 03_METADATA_SYSTEM
  path: ../../architecture/03_METADATA_SYSTEM.md
feature_name: Audiobook Module
module_name: audiobook
schema_name: public
content_types:
- Books
- Authors
- Series
chaptarr_integration:
  sync_direction: two-way
  metadata_source: Audnexus (via Chaptarr)
  webhook_events:
  - BookAdded
  - BookUpdated
  - BookDeleted
  - ChaptersUpdated
  chapter_sync: Automatic chapter marker extraction
  notes: Chaptarr provides Audnexus metadata and chapter information
supported_formats:
- format: M4B
  description: MPEG-4 audiobook format with embedded chapters
  chapters: Native chapter support
  streaming: Direct HLS streaming with chapter markers
  preferred: true
- format: MP3
  description: Multi-file MP3 audiobook (one file per chapter)
  chapters: Inferred from file structure
  streaming: HLS transcode with generated chapters
- format: AAC
  description: Advanced Audio Coding files
  chapters: M4B container for chapter support
  streaming: Direct HLS streaming
- format: M4A
  description: MPEG-4 Audio (Apple)
  chapters: Can embed chapters like M4B
  streaming: Direct HLS streaming
metadata_sources:
- name: Chaptarr
  purpose: Primary source for automated audiobook management
  priority: 1
  fields: All metadata via Audnexus integration
- name: Audnexus
  purpose: Direct fallback for missing metadata
  priority: 2
  fields: Title, author, narrator, publisher, duration, cover art, description
  api_url: https://api.audnex.us/
- name: OpenLibrary
  purpose: Supplemental metadata for books
  priority: 3
  fields: ISBN, subjects, publication details
  api_url: https://openlibrary.org/api/
- name: Goodreads
  purpose: Ratings and reviews
  priority: 4
  fields: Average rating, review count, community reviews
database_schema: "**Schema**: `public`\n\n  **Tables**: See migration files for complete\
  \ schema\n\n  **Indexes**: Optimized for common queries and full-text search\n  "
playback_features:
  streaming_protocol: HLS (HTTP Live Streaming)
  chapter_navigation: Jump to any chapter instantly
  variable_speed: 0.5x, 0.75x, 1.0x, 1.25x, 1.5x, 1.75x, 2.0x, 2.5x, 3.0x
  sleep_timer: 5, 10, 15, 30, 45, 60 minutes, end of chapter
  bookmarks: User-created bookmarks with notes
  progress_sync: Real-time sync across devices
  offline_playback: Download for offline listening
chapter_features:
  extraction: Automatic from M4B files or file structure
  navigation: Previous/next chapter, chapter list view
  thumbnails: Chapter artwork if available
  search: Search within chapter titles
  resume: Auto-resume from last position within chapter
progress_tracking:
  granularity: Per-second accuracy
  storage: Per-user, per-audiobook
  sync_to_chaptarr: Optional sync back to Chaptarr
  history: Playback history with timestamps
  statistics: Total listening time, books completed
api_endpoints:
- method: GET
  path: /api/v1/audiobooks
  description: List all audiobooks with pagination and filters
- method: GET
  path: /api/v1/audiobooks/:id
  description: Get audiobook details by ID
- method: GET
  path: /api/v1/audiobooks/:id/chapters
  description: Get chapter list for an audiobook
- method: GET
  path: /api/v1/audiobooks/:id/stream
  description: Get HLS streaming URL for audiobook playback
- method: GET
  path: /api/v1/audiobooks/:id/progress
  description: Get user playback progress for an audiobook
- method: PUT
  path: /api/v1/audiobooks/:id/progress
  description: Update user playback progress
- method: POST
  path: /api/v1/audiobooks/:id/bookmarks
  description: Create a bookmark at current position
- method: GET
  path: /api/v1/audiobooks/authors
  description: List all audiobook authors
- method: GET
  path: /api/v1/audiobooks/series
  description: List all audiobook series
architecture_diagram: "```\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  \  â”‚   Client    â”‚â”€â”€â”€â”€â–¶â”‚  API Handler â”‚â”€â”€â”€â”€â–¶â”‚   Service   â”‚\n  â”‚  (Web/App)  â”‚â—€â”€â”€â”€â”€â”‚\
  \   (ogen)     â”‚â—€â”€â”€â”€â”€â”‚   (Logic)   â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   \
  \  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                                                   â”‚\n     \
  \                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                \
  \            â–¼                      â–¼            â–¼\n                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\
  \          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”\n                      â”‚Repositoryâ”‚       \
  \   â”‚ Metadata  â”‚  â”‚  Cache â”‚\n                      â”‚  (sqlc)  â”‚          â”‚  Service\
  \  â”‚  â”‚(otter) â”‚\n                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\
  \                           â”‚                      â”‚\n                         \
  \  â–¼                      â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  \                    â”‚ PostgreSQL  â”‚        â”‚ External â”‚\n                    â”‚\
  \   (pgx)     â”‚        â”‚   APIs   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       \
  \ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  ```"
module_structure: "```\n  internal/content/audiobook/\n  â”œâ”€â”€ module.go           \
  \   # fx module definition\n  â”œâ”€â”€ repository.go          # Database operations (sqlc)\n\
  \  â”œâ”€â”€ service.go             # Business logic\n  â”œâ”€â”€ handler.go             # HTTP\
  \ handlers (ogen)\n  â”œâ”€â”€ types.go               # Domain types\n  â””â”€â”€ cache.go \
  \              # Caching layer (otter)\n  ```"
component_interaction: "1. Client requests resource via HTTP\n  2. API handler validates\
  \ and routes to service\n  3. Service checks cache, queries repository if needed\n\
  \  4. Repository executes SQL via sqlc\n  5. Results return through layers to client"
