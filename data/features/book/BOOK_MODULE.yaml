doc_title: Book Module
doc_category: feature
created_date: '2026-01-31'
overall_status: âœ… Complete
status_design: âœ…
status_design_notes: Complete book module design
status_sources: âœ…
status_sources_notes: All book APIs documented
status_instructions: âœ…
status_instructions_notes: Generated from design
status_code: ğŸ”´
status_code_notes: '-'
status_linting: ğŸ”´
status_linting_notes: '-'
status_unit_testing: ğŸ”´
status_unit_testing_notes: '-'
status_integration_testing: ğŸ”´
status_integration_testing_notes: '-'
technical_summary: '> Book/eBook content management with metadata enrichment from
  OpenLibrary and Goodreads


  Complete eBook library:

  - **Metadata Sources**: OpenLibrary (primary), Google Books, Goodreads, Hardcover

  - **Supported Formats**: EPUB, PDF, MOBI, AZW3, CBZ (comics)

  - **Reading Features**: Web reader, progress tracking, bookmarks, highlights

  - **Collections**: Reading lists, series tracking, genre collections

  - **Sync**: Multi-device reading progress synchronization'
wiki_tagline: '> Your digital library with reading progress and recommendations'
wiki_overview: The Book Module provides a comprehensive eBook library with support
  for multiple formats including EPUB, PDF, and MOBI. Track your reading progress
  across devices, create custom reading lists, and discover new books through metadata
  from OpenLibrary, Google Books, and Goodreads. The built-in web reader lets you
  read anywhere without additional software.
sources:
- name: Uber fx
  url: https://pkg.go.dev/go.uber.org/fx
  note: Auto-resolved from fx
- name: Google Books API
  url: https://developers.google.com/books/docs/v1/using
  note: Auto-resolved from google-books
- name: ogen OpenAPI Generator
  url: https://pkg.go.dev/github.com/ogen-go/ogen
  note: Auto-resolved from ogen
- name: Open Library API
  url: https://openlibrary.org/developers/api
  note: Auto-resolved from openlibrary
- name: pgx PostgreSQL Driver
  url: https://pkg.go.dev/github.com/jackc/pgx/v5
  note: Auto-resolved from pgx
- name: PostgreSQL Arrays
  url: https://www.postgresql.org/docs/current/arrays.html
  note: Auto-resolved from postgresql-arrays
- name: PostgreSQL JSON Functions
  url: https://www.postgresql.org/docs/current/functions-json.html
  note: Auto-resolved from postgresql-json
- name: River Job Queue
  url: https://pkg.go.dev/github.com/riverqueue/river
  note: Auto-resolved from river
- name: sqlc
  url: https://docs.sqlc.dev/en/stable/
  note: Auto-resolved from sqlc
- name: sqlc Configuration
  url: https://docs.sqlc.dev/en/stable/reference/config.html
  note: Auto-resolved from sqlc-config
design_refs:
- title: 01_ARCHITECTURE
  path: ../../architecture/01_ARCHITECTURE.md
- title: 02_DESIGN_PRINCIPLES
  path: ../../architecture/02_DESIGN_PRINCIPLES.md
- title: 03_METADATA_SYSTEM
  path: ../../architecture/03_METADATA_SYSTEM.md
feature_name: Book Module
module_name: book
schema_name: public
content_types:
- Books
- Authors
- Series
supported_formats:
- format: EPUB
  description: Electronic Publication (industry standard)
  reader: Built-in web reader with Epub.js
  features: Reflowable text, font customization, night mode
  preferred: true
- format: PDF
  description: Portable Document Format
  reader: PDF.js web reader
  features: Page navigation, zoom, search
  notes: Fixed layout, not reflowable
- format: MOBI
  description: Mobipocket eBook format (Amazon Kindle)
  reader: Convert to EPUB or serve as-is
  features: Basic reading, limited styling
- format: AZW3
  description: Amazon Kindle Format 8
  reader: Convert to EPUB for web reading
  features: Enhanced formatting vs MOBI
- format: CBZ
  description: Comic Book Archive (ZIP)
  reader: Image-based comic reader
  features: Page-by-page image viewing
  notes: See COMICS_MODULE for full comic support
metadata_sources:
- name: OpenLibrary
  purpose: Primary metadata source
  priority: 1
  fields: Title, author, ISBN, subjects, publication date, cover, description
  api_url: https://openlibrary.org/api/
- name: Google Books
  purpose: Supplemental metadata and previews
  priority: 2
  fields: Book details, preview pages, related books
  api_url: https://www.googleapis.com/books/v1/
- name: Goodreads
  purpose: Ratings, reviews, recommendations
  priority: 3
  fields: Average rating, ratings count, reviews, similar books
  api_url: https://www.goodreads.com/api/
- name: Hardcover
  purpose: Alternative metadata source
  priority: 4
  fields: Book details, community features
  api_url: https://hardcover.app/api/
database_schema: "**Schema**: `public`\n\n  **Tables**: See migration files for complete\
  \ schema\n\n  **Indexes**: Optimized for common queries and full-text search\n  "
reading_features:
  web_reader:
    epub_library: Epub.js
    pdf_library: PDF.js
    features:
    - Font size customization
    - Font family selection
    - Line height adjustment
    - Margin customization
    - Night mode / Dark theme
    - Sepia mode
    - Column layout (1 or 2 columns)
    - Full-screen mode
  navigation:
  - Table of contents
  - Page navigation
  - Search within book
  - Jump to page/location
  - Previous/next chapter
  reading_progress:
    tracking: Automatic page/location tracking
    sync: Real-time across devices
    granularity: Per-page or CFI (Canonical Fragment Identifier) for EPUB
  bookmarks:
    creation: Click to bookmark current location
    notes: Optional note per bookmark
    management: View all bookmarks for a book
  highlights:
    selection: Select text to highlight
    colors: Yellow, green, blue, pink, purple
    notes: Optional note per highlight
    export: Export highlights to Markdown/JSON
collection_features:
  reading_lists:
    types:
    - Want to Read
    - Currently Reading
    - Completed
    - Favorites
    - Custom lists
    sharing: Public or private lists
  series_tracking:
    auto_detection: Group books by series from metadata
    progress: Track series completion percentage
    next_book: Suggest next book in series
  genre_collections:
    auto_tagging: From metadata subjects
    browsing: Browse by genre/subject
    filters: Filter by publication date, rating, etc.
recommendations:
  similar_books: Based on metadata (genre, author, series)
  collaborative_filtering: You might also like (if enough users)
  trending: Popular books across all users
  new_releases: Recently added books
api_endpoints:
- method: GET
  path: /api/v1/books
  description: List all books with pagination and filters
- method: GET
  path: /api/v1/books/:id
  description: Get book details by ID
- method: GET
  path: /api/v1/books/:id/read
  description: Get book content for web reader
- method: GET
  path: /api/v1/books/:id/download
  description: Download book file in original format
- method: GET
  path: /api/v1/books/:id/progress
  description: Get user reading progress for a book
- method: PUT
  path: /api/v1/books/:id/progress
  description: Update user reading progress
- method: POST
  path: /api/v1/books/:id/bookmarks
  description: Create a bookmark at current position
- method: GET
  path: /api/v1/books/:id/bookmarks
  description: Get all user bookmarks for a book
- method: POST
  path: /api/v1/books/:id/highlights
  description: Create a text highlight with optional note
- method: GET
  path: /api/v1/books/:id/highlights
  description: Get all user highlights for a book
- method: GET
  path: /api/v1/books/authors
  description: List all book authors
- method: GET
  path: /api/v1/books/series
  description: List all book series
- method: GET
  path: /api/v1/books/collections
  description: List all book collections
architecture_diagram: "```\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  \  â”‚   Client    â”‚â”€â”€â”€â”€â–¶â”‚  API Handler â”‚â”€â”€â”€â”€â–¶â”‚   Service   â”‚\n  â”‚  (Web/App)  â”‚â—€â”€â”€â”€â”€â”‚\
  \   (ogen)     â”‚â—€â”€â”€â”€â”€â”‚   (Logic)   â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   \
  \  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                                                   â”‚\n     \
  \                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                \
  \            â–¼                      â–¼            â–¼\n                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\
  \          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”\n                      â”‚Repositoryâ”‚       \
  \   â”‚ Metadata  â”‚  â”‚  Cache â”‚\n                      â”‚  (sqlc)  â”‚          â”‚  Service\
  \  â”‚  â”‚(otter) â”‚\n                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\
  \                           â”‚                      â”‚\n                         \
  \  â–¼                      â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n\
  \                    â”‚ PostgreSQL  â”‚        â”‚ External â”‚\n                    â”‚\
  \   (pgx)     â”‚        â”‚   APIs   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       \
  \ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  ```"
module_structure: "```\n  internal/content/book/\n  â”œâ”€â”€ module.go              # fx\
  \ module definition\n  â”œâ”€â”€ repository.go          # Database operations (sqlc)\n\
  \  â”œâ”€â”€ service.go             # Business logic\n  â”œâ”€â”€ handler.go             # HTTP\
  \ handlers (ogen)\n  â”œâ”€â”€ types.go               # Domain types\n  â””â”€â”€ cache.go \
  \              # Caching layer (otter)\n  ```"
component_interaction: "1. Client requests resource via HTTP\n  2. API handler validates\
  \ and routes to service\n  3. Service checks cache, queries repository if needed\n\
  \  4. Repository executes SQL via sqlc\n  5. Results return through layers to client"
